(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1dbfab41"],{"053b":function(e,t,a){},"62f4":function(e,t,a){"use strict";a("053b")},"794d":function(e,t,a){"use strict";a.r(t);var r=a("c7eb"),n=a("1da1"),i=(a("99af"),a("b0c0"),a("a434"),a("d3b7"),a("159b"),a("e9c4"),a("bc3a")),s=a.n(i),o={name:"createNft",data:function(){return{fileList:[],form:{name:"",url:"",hash:"",attributes:[],desc:""}}},methods:{handleRemove:function(e,t){},handlePreview:function(e){},handleSuccess:function(e,t,a){this.form.url="https://gateway.ipfs.io/ipfs/"+e.Hash,this.form.hash="ipfs://"+e.Hash},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))},removeAttr:function(e){var t=this.form.attributes.indexOf(e);-1!==t&&this.form.attributes.splice(t,1)},addAttr:function(){this.form.attributes.push({value:"",key:""})},onSubmit:function(){var e=this;return Object(n.a)(Object(r.a)().mark((function t(){var a,n,i,o;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={name:e.form.name,description:e.form.desc,image:e.form.hash},e.form.attributes.length>0&&(n={},e.form.attributes.forEach((function(e){n[e.key]=e.value})),a.attributes=n),i=new File([JSON.stringify(a,null,2)],"content.json",{type:"application/json"}),(o=new FormData).append("file",i),"https://ipfs.infura.io:5001/api/v0/add?pin=true",t.next=8,s.a.post("https://ipfs.infura.io:5001/api/v0/add?pin=true",o,{headers:{"Content-Type":"multipart/form-data"}});case 8:if(200===t.sent.status){t.next=12;break}return e.$message.warning("操作繁忙，请等待1分钟后重试!!!"),t.abrupt("return");case 12:case 14:case"end":return t.stop()}}),t)})))()}}},l=o,c=(a("62f4"),a("2877")),u=Object(c.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-form",{ref:"form",staticClass:"dynamic",attrs:{model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"图片上传"}},[a("div",{staticClass:"flex"},[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.form.url,"preview-src-list":[e.form.url]}}),a("el-upload",{staticClass:"upload-demo",attrs:{action:"https://ipfs.infura.io:5001/api/v0/add?pin=true","on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,multiple:"",limit:1,"on-exceed":e.handleExceed,"on-success":e.handleSuccess,"file-list":e.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)]),a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"描述信息"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),e._l(e.form.attributes,(function(t,r){return a("el-form-item",{key:r,attrs:{label:"属性:",rules:{required:!0,message:"属性名称不能为空",trigger:"blur"}}},[a("div",{staticClass:"flex"},[a("el-input",{attrs:{placeholder:"属性名"},model:{value:t.key,callback:function(a){e.$set(t,"key",a)},expression:"attr.key"}}),a("el-input",{attrs:{placeholder:"属性值"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"attr.value"}}),a("el-button",{on:{click:function(a){return a.preventDefault(),e.removeAttr(t)}}},[e._v("删除")])],1)])})),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即创建")]),a("el-button",{on:{click:e.addAttr}},[e._v("新增属性")])],1)],2)],1)}),[],!1,null,"3b1bc172",null);t.default=u.exports}}]);